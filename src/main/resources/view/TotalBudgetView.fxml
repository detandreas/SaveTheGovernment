<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.SeparatorMenuItem?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="15.0" styleClass="content-container" stylesheets="@../styles/main.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="budget.frontend.controller.TotalBudgetController">

    <HBox alignment="CENTER_LEFT" spacing="10.0">
        <children>
            <Label styleClass="page-title" text="Budget 2025" />

            <Region HBox.hgrow="ALWAYS" />
         <Label text="Year :" />
         <ComboBox fx:id="budgetYearComboBox" prefWidth="150.0" />

            <HBox alignment="CENTER_RIGHT" spacing="5.0">
                <children>
                    <MenuButton mnemonicParsing="false" styleClass="filter-button">
                        <graphic>
                            <ImageView fitHeight="18" fitWidth="18" pickOnBounds="true" preserveRatio="true">
                                <image>
                                    <Image url="@../images/filters_icon.png" />
                                </image>
                            </ImageView>
                        </graphic>
                        <items>
                            <MenuItem onAction="#handleSortAmountAsc" styleClass="filter-item" text="Sort by Amount: Low to High" />
                            <MenuItem onAction="#handleSortAmountDesc" styleClass="filter-item" text="Sort by Amount: High to Low" />

                            <SeparatorMenuItem />

                            <MenuItem onAction="#handleFilterExpenses" styleClass="filter-item" text="Filter: Expenses" />
                            <MenuItem onAction="#handleFilterRevenue" styleClass="filter-item" text="Filter: Revenue" />

                            <SeparatorMenuItem />

                            <MenuItem onAction="#handleClearFilters" styleClass="filter-item" text="Clear Filters" />
                        </items>
                    </MenuButton>
                </children>
            </HBox>
        </children>
    </HBox>

    <!-- Summary Cards -->
    <HBox alignment="CENTER" spacing="20.0" HBox.hgrow="ALWAYS">
        <children>
            <VBox alignment="CENTER" maxWidth="Infinity" minHeight="120.0" spacing="15.0" styleClass="summary-card-totalBudget" HBox.hgrow="ALWAYS">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>
                <children>
                    <Label styleClass="summary-card-title" text="Total Budget" />
                    <Label fx:id="totalBudgetLabel" styleClass="summary-card-value" />
                </children>
            </VBox>

            <VBox alignment="CENTER" maxWidth="Infinity" minHeight="120.0" spacing="15.0" styleClass="summary-card-totalExpenses" HBox.hgrow="ALWAYS">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>
                <children>
                    <Label styleClass="summary-card-title" text="Total Expenses" />
                    <Label fx:id="totalExpensesLabel" styleClass="summary-card-value" />
                </children>
            </VBox>

            <VBox alignment="CENTER" maxWidth="Infinity" minHeight="120.0" spacing="15.0" styleClass="summary-card-totalRevenue" HBox.hgrow="ALWAYS">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>
                <children>
                    <Label styleClass="summary-card-title" text="Total Revenue" />
                    <Label fx:id="totalRevenueLabel" styleClass="summary-card-value" />
                </children>
            </VBox>
        </children>
    </HBox>

    <TableView fx:id="budgetTable" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="nameColumn" prefWidth="200" text="Budget Item" />
            <TableColumn fx:id="valueColumn" prefWidth="150" styleClass="center-aligned-cell" text="Amount (â‚¬)" />
            <TableColumn fx:id="typeColumn" prefWidth="100" text="Type" />       
        </columns>
        
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
        
        <placeholder>
           <Label styleClass="placeholder-label" text="No records." />
        </placeholder>
    </TableView>

</VBox>
